<!DOCTYPE html>
<html>
    <head>
        <title>Dette er en title</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
        <script src="http://localhost:8080/pay.js"></script>
    </head>
    <body>
        <input id="amount" type="text" value="1000"><button id='paybutton'>Betal</button>
        <div id='info'></div>
    </body>

    <script>
        
        $('#paybutton').click(function(){
            $(this).attr('disabled','disabled');
            Pay.setPublicKey('qwerty');
            Pay.setServiceRoot('http://localhost:8080');
            var orderNumber = new Date().getTime();
            Pay.createToken({"orderNumber":orderNumber, "description":'Dette er den vildeste ordre.'}, function(token) {
                Pay.authorizeRemote(token, $('#amount').val(), 'DKK', 'http://localhost:8080/testshop/ok.html', 'http://localhost:8080/testshop/cancel.html');
            });
        }); 
        
        $('#info').ajaxError(function(event, jqXHR, ajaxSettings, thrownError) {
            $(this).text(event + "/" + thrownError);
        });
    </script>
</html>

